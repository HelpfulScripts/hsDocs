(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{27:function(t,e,a){"use strict";a.r(e);var s,r,i=a(0),o=a(10);function n(t){const e=t.toFixed(1);return"Infinity"===e?"1e20":e}!function(t){t.start="start",t.middle="middle",t.end="end"}(s||(s={})),function(t){t.top="top",t.center="center",t.bottom="bottom"}(r||(r={}));class l{text(t,e){let a=0,o=t.xpos;switch(t.xpos){case s.start:case s.end:break;case s.middle:default:o=s.middle}switch(t.ypos){case r.top:a=.7;break;case r.center:a=.35;break;case r.bottom:default:a=0}const l={x:t.x||"",y:t.y||"",dx:n(t.hOffset||0)+"em",dy:n((t.vOffset||0)+a)+"em",style:`text-anchor:${o}; ${t.style||""}`,class:t.cssClass};return Object(i.m)("text",l,e)}rect(t,e,a,s){e.w<0&&(t.x+=e.w,e.w=-e.w),e.h<0&&(t.y+=e.h,e.h=-e.h);const r={x:n(t.x),y:n(t.y),width:n(e.w)+(e.wunit||""),height:n(e.h)+(e.hunit||""),style:a};return Object(i.m)("rect",r)}circle(t,e,a,s){return Object(i.m)("circle",{cx:n(t.x),cy:n(t.y),r:n(e),style:a},Object(i.m)("title",s))}clipRect(t,e,a){e.h<0&&console.log(e);const s={x:n(t.x),y:n(t.y),width:n(Math.abs(e.w))+(e.wunit||""),height:n(Math.abs(e.h))+(e.hunit||"")};return Object(i.m)("defs",Object(i.m)("clipPath",{id:a},Object(i.m)("rect",s)))}line(t,e,a,s,r){const o={x1:n(t),y1:n(a),x2:n(e),y2:n(s),class:r};return Object(i.m)("line",o)}horLine(t,e,a,s){const r={x1:n(t),y1:n(a),x2:n(e),y2:n(a),class:s};return Object(i.m)("line",r)}verLine(t,e,a,s){const r={x1:n(t),y1:n(e),x2:n(t),y2:n(a),class:s};return Object(i.m)("line",r)}polyline(t,e,a,s,r,o,l){return Object(i.m)("polyline",{"clip-path":r?`url(#${r})`:void 0,style:o,points:t.map(t=>`${n(s.x.convert(t[e]))},${n(s.y.convert(t[a]))}`).join(" ")},Object(i.m)("title",l))}polygon(t,e,a,s,r,o,l,c,m){const h=void 0===a,d=t=>n(o.x.convert(t)),u=t=>n(o.y.convert(t)),g=l?`url(#${l})`:void 0,p=t.map((t,e)=>`${d(h?e:t[a])},${u(t[s])}`).concat(e.map((t,s)=>`${d(h?e.length-s-1:t[a])},${u(r?t[r]:0)}`)).join(" ");return Object(i.m)("polygon",{"clip-path":g,style:c,points:p},Object(i.m)("title",m))}shape(t,e,a,s){return Object(i.m)("polyline",{"clip-path":e?`url(#${e})`:void 0,style:a,points:t.map(t=>`${n(t[0])},${n(t[1])}`).join(" ")},Object(i.m)("title",s))}}class c extends l{static defaultConfig(t){function e(t,e,a){return{visible:a,text:"",xpos:e?s.middle:t?s.end:s.start,ypos:e?t?r.top:r.bottom:r.center,hOffset:e?0:t?-.7:.7,vOffset:e?t?.7:-.7:0}}function a(t,e){return{visible:e,length:(t?1:-1)*(e?10:5)}}function i(t,i){return{visible:!!t,crossesAt:t?"min":"max",scale:{type:c.type.linear,domain:["auto","auto"]},title:function(t,e){return{visible:!0,text:(e?"x":"y")+(t?"":"2"),xpos:e?s.end:t?s.middle:s.start,ypos:e?r.top:t?r.bottom:r.top,hOffset:e?-2:t?0:.3,vOffset:e?t?.4:-1.2:t?-.5:.7}}(t,i),ticks:{major:{marks:a(t,!0),labels:e(t,i,!0),labelFmt:void 0},minor:{marks:a(t,!1),labels:e(t,i,!1),labelFmt:void 0}}}}t.axes={primary:{x:i(!0,!0),y:i(!0,!1)},secondary:{x:i(!1,!0),y:i(!1,!1)}}}static adjustConfig(t){}drawAxisLine(t,e,a){return t?this.horLine(e[0],e[1],a,"hs-graph-axis-line"):this.verLine(a,e[0],e[1],"hs-graph-axis-line")}drawTitle(t,e,a,s,r){e.cssClass="hs-graph-axis-title";const o={transform:`translate(${t?s[1]:r}, ${t?r:s[1]})`};return e.visible?Object(i.m)("g",o,this.text(e,e.text)):void 0}drawTickMarks(t,e,a,s,r,o){return Object(i.m)("svg",{class:`hs-graph-axis-${e}-tick-marks`},o.marks.visible?r.marks.map(e=>t?this.verLine(s.convert(e),a,a+o.marks.length):this.horLine(a,a-o.marks.length,s.convert(e))):"")}drawTickLabels(t,e,a,s,r,o){return s.setLabelFormat(o.labelFmt),Object(i.m)("svg",{class:`hs-graph-axis-${e}-tick-label`},o.labels.visible?r.labels.map(e=>{const r=s.convert(e.pos),n={transform:`translate(${t?r:a}, ${t?a:r})`};return Object(i.m)("g",n,this.text(o.labels,e.text))}):"")}drawAxis(t,e,a,s){const r="x"===t,o=e[t].range(),n=s[a][t];e[t].scaleType(n.scale.type);const l=function(t,e){let a;switch(t){case"min":a=e.domain()[0];break;case"max":a=e.domain()[1];break;default:a=t||0}return e.convert(a)}(n.crossesAt,e[r?"y":"x"]),c=e[t].ticks();return n.visible?Object(i.m)("svg",{class:`hs-graph-axis-${t} hs-graph-axis-${a}`},[this.drawAxisLine(r,o,l),this.drawTitle(r,n.title,a,o,l),this.drawTickMarks(r,"minor",l,e[t],c.minor,n.ticks.minor),this.drawTickMarks(r,"major",l,e[t],c.major,n.ticks.major),this.drawTickLabels(r,"minor",l,e[t],c.minor,n.ticks.minor),this.drawTickLabels(r,"major",l,e[t],c.major,n.ticks.major)]):void 0}view(t){const e=t.attrs.cfg,a=t.attrs.scales;return Object(i.m)("svg",{class:"hs-graph-axis"},[this.drawAxis("x",a.primary,"primary",e),this.drawAxis("y",a.primary,"primary",e),this.drawAxis("x",a.secondary,"secondary",e),this.drawAxis("y",a.secondary,"secondary",e)])}}c.type={linear:"linear axis",log:"log axis",date:"date axis",index:"index axis",percent:"percent axis",ordinal:"ordinal axis",nominal:"nominal axis"};var m=a(1);function h(t,e){t.labels.push({pos:e,text:""+Math.round(1e6*e)/1e6})}function d(t,e,a){t.labels.push({pos:e.getTime(),text:Object(m.date)(a,e)})}function u(t,e,a){function s(e,a){let s=Math.pow(10,Math.floor(Math.log10(e)));e=Math.floor(e/s)*s;const r=Math.floor(t[0]/e)*e,i=Math.ceil(t[1]/e)*e;for(let t=r;t<=i;t+=e)h(a,t);return e}s(s((t[1]-t[0])/a,e.major)/a,e.minor)}const g=[[10,0,0,0],[5,0,0,0],[2,0,0,0],[1,0,0,0],[0,6,0,0],[0,3,0,0],[0,1,0,0],[0,0,7,0],[0,0,1,0],[0,0,0,4],[0,0,0,1]];function p(t,e,a,s){const r=(t,e)=>t.pos-e.pos;function i(){n.minor.labels.sort(r),n.major.labels.sort(r)}const o=[e[0],e[1]],n={major:{marks:[],labels:[]},minor:{marks:[],labels:[]}};switch(t){case c.type.log:!function(t,e){t[0]=Math.max(t[0],1e-20),t[1]=Math.max(t[1],1e-20);let a=Math.pow(10,Math.floor(Math.log10(t[1]-t[0]))),s=Math.pow(10,Math.floor(Math.log10(t[0]))),r=Math.pow(10,Math.ceil(Math.log10(t[1])));if(a>s)for(let t=s;t<=r;t*=10)for(let a=1;a<=20;a++)1===a&&t*a<r?h(e.major,t*a):a%10==0||(a<10?h(e.minor,t*a):a%2==0&&h(e.minor,t*a));else{s=Math.floor(t[0]/a)*a,((r=Math.ceil(t[1]/a)*a)-s)/a<4&&(a/=2);for(let t=s;t<=r;t+=a)h(e.major,t);h(e.major,s),h(e.major,r)}}(o,n),i();break;case c.type.date:!function(t,e,a="%MM/%DD/%YY"){function s(t,e){const s=t=>new Date(Math.floor(r[t].getFullYear()/c)*c+(t?i:0),i>0?0:Math.floor(r[t].getMonth()/m)*m+(t?o:0),o>0?1:r[t].getDate()-(7===n?r[t].getDay():0)+(t?n:0),n>0?0:r[t].getHours()+(t?l:0)),i=g[t][0],o=g[t][1],n=g[t][2],l=g[t][3],c=i||1,m=o||1,h=s(0),u=s(1);a=l?"%hh:%mm":"%MM/%DD/%YY";for(let t=h;t<=u;t=new Date(t.getFullYear()+i,t.getMonth()+o,t.getDate()+n,t.getHours()+l))d(e,t,a)}const r=["number"==typeof t[0]?new Date(t[0]):t[0],"number"==typeof t[1]?new Date(t[1]):t[1]];isNaN(r[0].getTime())&&(r[0]=new Date("1/1/1980")),isNaN(r[1].getTime())&&(r[0]=new Date);const i=r[1].getTime()-r[0].getTime();g.some((t,a)=>{const r=m.ms.fromDays(365*t[0]+30*t[1]+t[2])+m.ms.fromHours(t[3]);return i>3*r&&(s(a,e.major),s(Math.min(a+1,g.length-1),e.minor),!0)})}(o,n,s),i();break;case c.type.percent:!function(t,e,a){const s=t=>t.text=`${100*Math.round(t.pos)}%`;u(t,e,a),e.major.labels.forEach(s),e.minor.labels.forEach(s)}(o,n,a),i();break;case c.type.ordinal:case c.type.nominal:break;case c.type.index:case c.type.linear:default:u(o,n,a),i()}return n}class f{constructor(t){this.cfg=t,this.typeVal=c.type.linear,this.rangeVal=[0,1],this.domVal=[0,1],this.domMinAuto=0,this.domMaxAuto=0,this.scaleType(t.type),this.domain(t.domain)}setLabelFormat(t){this.labelFmt=t}range(t){return t&&(this.rangeVal=t),this.rangeVal}domain(t){if(t){switch(this.scaleType()===c.type.date?"string"!=typeof t[0]&&"string"!=typeof t[1]||(this.domVal[0]="auto"===t[0]?0:Date.parse(t[0]),this.domVal[1]="auto"===t[1]?1:Date.parse(t[1])):(this.domVal[0]="auto"===t[0]?0:t[0],this.domVal[1]="auto"===t[1]?1:t[1]),t[0]){case"tight":this.domMinAuto=2;break;case"auto":this.domMinAuto=1;break;default:this.domMinAuto=0}switch(t[1]){case"tight":this.domMaxAuto=2;break;case"auto":this.domMaxAuto=1;break;default:this.domMaxAuto=0}}return this.typeVal===c.type.log&&(this.domVal[1]<=0&&(this.domVal[1]=10),this.domVal[0]<=0&&(this.domVal[0]=this.domVal[1]/10)),this.domVal}scaleType(t){return t&&(this.typeVal=t),this.typeVal}setAutoDomain(t){const e=p(this.scaleType(),t,4,this.labelFmt);switch(this.domMinAuto){case 1:this.domVal[0]=e.major.labels[0]?e.major.labels[0].pos:t[0];break;case 2:this.domVal[0]=t[0]}switch(this.domMaxAuto){case 1:this.domVal[1]=e.major.labels[e.major.labels.length-1].pos;break;case 2:this.domVal[1]=t[1]}}ticks(t=4){const e=[this.domain()[0],this.domain()[1]],a=t=>t.pos>=e[0]&&t.pos<=e[1],s=p(this.scaleType(),this.domain(),t,this.labelFmt);return s.minor.labels=s.minor.labels.filter(a),s.major.labels=s.major.labels.filter(a),0===s.major.labels.length&&(s.major.labels=s.minor.labels,s.minor.labels=[]),function(t,e){switch(e){case c.type.nominal:case c.type.index:const a=t.major.labels.length;t.major.marks=Array(a+1).fill(1).map((t,e)=>e-.5),t.minor.marks=t.minor.labels?t.minor.labels.map(t=>t.pos):[];break;case c.type.log:case c.type.date:case c.type.percent:case c.type.ordinal:case c.type.linear:default:t.major.marks=t.major.labels?t.major.labels.map(t=>t.pos):[],t.minor.marks=t.minor.labels?t.minor.labels.map(t=>t.pos):[]}}(s,this.scaleType()),s}convert(t){const e=this.domain(),a=this.range(),s=e[0],r=e[1];let i;switch(this.scaleType()){case c.type.log:i=Math.log(t/s)/Math.log(r/s)*(a[1]-a[0])+a[0];break;case c.type.nominal:break;case c.type.date:case c.type.percent:case c.type.index:case c.type.ordinal:case c.type.linear:default:i=(t-s)/(r-s)*(a[1]-a[0])+a[0]}return i}}class y extends l{static defaultConfig(t){t.canvas={range:{w:100,wunit:"%",h:100,hunit:"%"}}}static adjustConfig(t){}view(t){const e=t.attrs.cfg;return Object(i.m)("svg",{class:"hs-graph-canvas",width:"100%",height:"100%"},[this.rect({x:0,y:0},{w:e.range.w,h:e.range.h,wunit:e.range.wunit,hunit:e.range.hunit},"")])}}class b extends l{drawLine(t,e,a,s,r,o,n){const l=`stroke: ${o.line.color}; stroke-width:${o.line.width};`;return o.line.visible?this.polyline(e,a,s,r,t,l,n):Object(i.m)(".invisible-line","")}drawMarker(t,e,a,s,r,o,n){const l=x.marker;let c=`fill:${o.marker.color}`;return o.marker.visible?Object(i.m)("svg",{class:"hs-graph-series-markers"},e.map(t=>{const e=r.x.convert(t[a]),m=r.y.convert(t[s]),h=o.marker.size;switch(o.marker.shape){case l.circle:return this.circle({x:e,y:m},h,c,n);case l.square:return this.rect({x:e-h,y:m-h},{w:2*h,h:2*h},c,n);case l.diamond:return this.shape([[e-h,m],[e,m+h],[e+h,m],[e,m-h]],void 0,c,n);case l.upTriangle:return this.shape([[e-h,m+h],[e+h,m+h],[e,m-h]],void 0,c,n);case l.downTriangle:return this.shape([[e-h,m-h],[e+h,m-h],[e,m+h]],void 0,c,n)}return Object(i.m)(`.unkown-marker-${o.marker.shape}`,"")})):Object(i.m)(".invisible-marker","")}drawLabel(t,e,a,o,n,l,c){const h=c.style,d={text:"",cssClass:"",style:`fill:${h.label.color}`,xpos:s.middle,ypos:r.center,hOffset:c.hOffset,vOffset:c.vOffset};return h.marker.visible?Object(i.m)("svg",{class:"hs-graph-series-labels"},e.map(t=>(d.x=""+l.x.convert(t[a]),d.y=""+l.y.convert(t[o]),this.text(d,Object(m.round)(t[n],3))))):Object(i.m)(".invisible-marker","")}drawArea(t,e,a,s,r,o,n,l){if(n.fill.visible){const i=`fill: ${n.fill.color};`,c=e,m=e.slice().reverse();return this.polygon(c,m,a,s,r,o,t,i,l)}Object(i.m)(".invisible-line","")}setDefaults(t,e,a){}}class x extends l{static defaultConfig(t){t.series=new v}static adjustConfig(t){t.series.series.forEach(e=>{void 0===e.x&&(t.axes.primary.x.title.hOffset=0,t.axes.primary.x.scale.type=c.type.index,t.grid.minor.ver.visible=!1)})}drawClipRect(t,e){return t?this.clipRect({x:e.x.range()[0],y:e.y.range()[1]},{w:e.x.range()[1]-e.x.range()[0],h:e.y.range()[0]-e.y.range()[1]},t):Object(i.m)("")}view(t){const e=t.attrs.cfg,a=t.attrs.scales.primary,s=t.attrs.data,r=e.clip?"hs"+Math.floor(1e4*Math.random()):void 0;return e.series.map(t=>{t.map===x.map.shared&&(t.ySum="$sum",s[t.dataIndex].colAdd(t.ySum),s[t.dataIndex].colInitialize(t.ySum,0))}),e.series.map(t=>{const e=s[t.dataIndex];if(t.map===x.map.shared){const a=e.colNumber(t.y);e.colInitialize(t.ySum,(t,e,s)=>t+s[a])}t.map&&(t.yBase="$"+t.map,e.colAdd(t.yBase),e.colInitialize(t.yBase,0))}),Object(i.m)("svg",{class:"hs-graph-series"},[this.drawClipRect(r,a),Object(i.m)("svg",e.series.map((t,e)=>{const o=s[t.dataIndex],n=x.plot[t.type]||x.plot.line;n.setDefaults(o,t,a);const l=t.cond?o.filter(t.cond):o,c=n.plot(l,t,a,e,r);if(t.map){const e=l.colNumber(t.y);l.colInitialize(t.yBase,(t,a,s)=>t+s[e])}return Object(i.m)("svg",{class:`hs-graph-series-${e}`},c)}))])}}x.marker={circle:Symbol("circle marker"),square:Symbol("square marker"),diamond:Symbol("diamond marker"),upTriangle:Symbol("upward triangle marker"),downTriangle:Symbol("downward triangle marker")},x.plot={line:new class extends b{plot(t,e,a,s,r){const o=t.colNumber(e.x),n=t.colNumber(e.y);return void 0===o?Object(i.m)(".error",""):void 0===n?Object(i.m)(".error",""):[this.drawLine(r,t.getData(),o,n,a,e.style,e.y),this.drawMarker(r,t.getData(),o,n,a,e.style,e.y)]}},marker:new class extends b{plot(t,e,a,s,r){const o=t.colNumber(e.x),n=t.colNumber(e.y),l=e.l?t.colNumber(e.l):void 0;return void 0===o?Object(i.m)(".error",""):void 0===n?Object(i.m)(".error",""):[this.drawMarker(r,t.getData(),o,n,a,e.style,e.y),void 0===l?void 0:this.drawLabel(r,t.getData(),o,n,l,a,e)]}},bar:new class extends b{drawBar(t,e,a,s,r,o,n,l){const c=`fill: ${n.bar.color};`,m=void 0===a,h=o.x.domain(),d=l*n.bar.offset*(h[1]-h[0])/(100*e.getData().length),u=n.bar.width*(h[1]-h[0])/(100*e.getData().length);return Object(i.m)("svg",{class:"hs-graph-series-bars"},e.getData().map((t,e)=>{const i=o.x.convert((m?e:t[a])+d-u/2),n=o.x.convert((m?e:t[a])+d+u/2),l=o.y.convert(void 0===r?0:t[r]),h=o.y.convert(t[s]);return this.rect({x:i,y:l},{h:h-l,w:n-i},c)}))}setDefaults(t,e,a){super.setDefaults(t,e,a);let s=a.y.domain();s[0]>0&&(s[0]=0,a.y.domain(s)),void 0===e.x&&a.x.domain([-.5,t.getData().length-.5])}plot(t,e,a,s,r){const o=t.colNumber(e.x),n=t.colNumber(e.y),l=e.yBase?t.colNumber(e.yBase):void 0;return void 0===n?Object(i.m)(".error",""):[this.drawBar(r,t,o,n,l,a,e.style,s)]}},area:new class extends b{plot(t,e,a,s,r){const o=t.colNumber(e.x),n=t.colNumber(e.y),l=t.colNumber(e.yBase),c=t.colNumber("$sum"),m=t=>void 0===c?[t[o],t[n]+t[l],t[l]]:[t[o],(t[n]+t[l])/t[c],t[l]/t[c]];if(void 0===n)return Object(i.m)(".error","");if(e.map){const s=t.getData().map(m);return[this.drawArea(r,s,0,1,2,a,e.style,e.y)]}{const s=t.getData();return[this.drawArea(r,s,o,n,l,a,e.style,e.y)]}}}},x.map={stacked:"stacked",shared:"shared"},x.defaultStyle={line:{color:"default",visible:!0,width:2},marker:{color:"default",visible:!1,size:10,shape:x.marker.circle},label:{color:"default",visible:!1},fill:{color:"default",visible:!1},bar:{color:"default",visible:!1,width:50,offset:30}},x.defaultColors=["#f00","#0f0","#00f","#ff0","#0ff","#f0f","#000","#444","#888","#ccc"];class v{constructor(){this.seriesDefs=[],this.clip=!0}set series(t){const e=x.defaultStyle,a=x.defaultColors;t.forEach(t=>{t.type=t.type||"line",t.style=t.style||{},t.dataIndex=t.dataIndex||0;const s={color:a[this.seriesDefs.length]};switch(function t(e,a,s){Object.keys(a).forEach(r=>{"object"==typeof a[r]?(void 0===e[r]&&(e[r]={}),t(e[r],a[r],s)):(void 0===e[r]&&(e[r]=a[r]),"default"===e[r]&&(e[r]=s[r]))})}(t.style,e,s),this.seriesDefs.push(t),t.type){case"line":t.style.line.visible=!0;break;case"marker":t.style.marker.visible=!0;break;case"area":case"bar":t.style.fill.visible=!0}})}get series(){return this.seriesDefs}}class w extends l{static defaultConfig(t){return t.chart={visible:!0,title:{visible:!0,text:"",hOffset:0,vOffset:-1.5,xpos:"middle",ypos:"top"}},t}static adjustConfig(t){}onupdate(t){this.updateTitleSize(t)}updateTitleSize(t){if(t.dom){const e=t.dom.lastChild;e&&e.clientWidth>0&&w.clientWidth!==e.clientWidth&&(w.clientWidth=e.clientWidth,w.clientHeight=e.clientHeight)}}drawBackground(t){const e=t.tl,a=t.br;return this.rect({x:e.x,y:e.y},{w:a.x-e.x,h:a.y-e.y},"")}drawTitle(t,e){const a=t.tl,s=t.br;switch(e.title.cssClass="hs-graph-chart-title",e.title.xpos){case"start":e.title.x=a.x+"";break;case"middle":e.title.x=(a.x+s.x)/2+"";break;case"end":e.title.x=s.x+""}switch(e.title.ypos){case"top":e.title.y=a.y+"";break;case"center":e.title.y=(a.y+s.y)/2+"";break;case"bottom":e.title.y=s.y+""}return e.title.visible?this.text(e.title,e.title.text):void 0}view(t){const e=t.attrs.cfg,a=t.attrs.plotArea;return Object(i.m)("svg",{class:"hs-graph-chart"},[this.drawBackground(a),this.drawTitle(a,e)])}}class j extends l{static defaultConfig(t){t.grid={major:{hor:{visible:!0},ver:{visible:!0}},minor:{hor:{visible:!1},ver:{visible:!1}}}}static adjustConfig(t){}drawHorGrid(t,e,a,s){return t.visible?Object(i.m)("svg",{class:"hs-graph-grid-hor"},s.marks.map(t=>this.horLine(a[0],a[1],e.convert(t)))):Object(i.m)("svg")}drawVerGrid(t,e,a,s){return t.visible?Object(i.m)("svg",{class:"hs-graph-grid-ver"},s.marks.map(t=>this.verLine(e.convert(t),a[0],a[1]))):Object(i.m)("svg")}view(t){const e=t.attrs.cfg,a=t.attrs.scales.primary;return Object(i.m)("svg",{class:"hs-graph-grid"},[Object(i.m)("svg",{class:"hs-graph-grid-minor"},[this.drawHorGrid(e.minor.hor,a.y,a.x.range(),a.y.ticks().minor),this.drawVerGrid(e.minor.ver,a.x,a.y.range(),a.x.ticks().minor)]),Object(i.m)("svg",{class:"hs-graph-grid-major"},[this.drawHorGrid(e.major.hor,a.y,a.x.range(),a.y.ticks().major),this.drawVerGrid(e.major.ver,a.x,a.y.range(),a.x.ticks().major)])])}}class k{static defaultConfig(t){t.legend={}}static adjustConfig(t){}view(t){return Object(i.m)("svg",{class:"hs-graph-legend",width:"100%",height:"100%"})}}const O=1e3;let M=700;class D extends l{constructor(){super(...arguments),this.marginOffset={left:0,right:0,top:0,bottom:0}}static makeConfig(t){const e={};if(D.defaultConfig(e),y.defaultConfig(e),c.defaultConfig(e),x.defaultConfig(e),j.defaultConfig(e),w.defaultConfig(e),k.defaultConfig(e),t)try{t(e)}catch(t){console.log("error in usercfg"),console.log(t),console.log(t.stack)}return e}static defaultConfig(t){t.graph={margin:{top:10,left:10,bottom:10,right:10},timeCond:{}}}static adjustConfig(t){y.adjustConfig(t),c.adjustConfig(t),x.adjustConfig(t),j.adjustConfig(t),w.adjustConfig(t),k.adjustConfig(t)}createPlotArea(t){return{tl:{x:t.left+this.marginOffset.left,y:t.top+this.marginOffset.top},br:{x:O-t.right-this.marginOffset.right,y:M-t.bottom-this.marginOffset.bottom}}}createData(t){t.series.data||console.log("cfg.series.data not set"),t.series.data.length>0||console.log("cfg.series.data not initialised with array of DataSets");const e=t.graph.timeCond;return t.series.data.map(t=>(t instanceof o.Data?t:new o.Data(t)).filter(e))}createScales(t){return this.scales||(this.scales={primary:{x:new f(t.primary.x.scale),y:new f(t.primary.y.scale)},secondary:{x:new f(t.secondary.x.scale),y:new f(t.secondary.y.scale)}}),this.scales}adjustRange(t,e){e.primary.x.range([t.tl.x,t.br.x]),e.primary.y.range([t.br.y,t.tl.y]),e.secondary.x.range([t.tl.x,t.br.x]),e.secondary.y.range([t.br.y,t.tl.y])}adjustHeight(t){if(t.dom&&t.dom.parentElement){const e=t.dom.parentElement,a=O*e.clientHeight/e.clientWidth;isNaN(a)||a===M||(M=a)}}adjustMargins(t){const e=t.graph.margin;function a(t){const a=document.getElementsByClassName(t),r=Array.prototype.map.call(a,t=>t.getBBox());r&&r[0]&&(s.t=Math.max(s.t,e.top-r[0].y),s.l=Math.max(s.l,e.left-r[0].x),s.b=Math.max(s.b,r[0].y+r[0].height+e.bottom-M),s.r=Math.max(s.r,r[0].x+r[0].width+e.right-O)),s.t=Math.min(s.t,40),s.b=30,s.l=40}const s={t:-1e6,l:-1e6,b:-1e6,r:-1e6};a("hs-graph-axis"),a("hs-graph-chart"),this.marginOffset.top+=Math.max(s.t),this.marginOffset.left+=Math.max(s.l),this.marginOffset.bottom+=Math.max(s.b),this.marginOffset.right+=Math.max(s.r)}onupdate(t){this.adjustHeight(t)}oncreate(t){window.addEventListener("resize",function(){i.m.redraw()}),this.adjustHeight(t),Promise.resolve(t.attrs.cfg).then(Object(m.delay)(10)).then(this.adjustMargins.bind(this)).then(i.m.redraw)}adjustDomains(t,e,a){const s=[[1e20,-1e20],[1e20,-1e20]];t.series.map(t=>{t.x?a[t.dataIndex].findDomain(t.x,s[0]):(s[0][0]=0,s[0][1]=a[t.dataIndex].export().rows.length-1),t.y&&a[t.dataIndex].findDomain(t.y,s[1]),t.yBase&&a[t.dataIndex].findDomain(t.yBase,s[1])}),e.primary.x.setAutoDomain(s[0]),e.primary.y.setAutoDomain(s[1])}view(t){const e=t.attrs.cfgFn,a=D.makeConfig(e),s=this.createPlotArea(a.graph.margin),r=this.createScales(a.axes);this.adjustRange(s,r);const o=this.createData(a);return this.adjustDomains(a.series,r,o),D.adjustConfig(a),t.attrs.cfg=a,Object(i.m)("svg",{class:"hs-graph",width:"100%",height:"100%",viewBox:`0 0 ${n(O)} ${n(M)}`},[Object(i.m)(y,{cfg:a.canvas}),Object(i.m)(w,{cfg:a.chart,plotArea:s}),Object(i.m)(j,{cfg:a.grid,scales:r}),Object(i.m)(c,{cfg:a.axes,scales:r}),Object(i.m)(x,{cfg:a.series,scales:r,data:o}),Object(i.m)(k,{cfg:a.legend})])}}a.d(e,"Graph",function(){return D}),a.d(e,"Series",function(){return x}),a.d(e,"Axes",function(){return c}),a.d(e,"Scale",function(){return f}),a.d(e,"Grid",function(){return j}),a.d(e,"Legend",function(){return k})}}]);